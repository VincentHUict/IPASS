<!DOCTYPE html>
<html>
<head>
	<title>Wegwijs met Wispr</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
	<link rel="stylesheet" type="text/css" href="css/pm.css">
</head>
<body>



	
	
	<nav
				class="navbar navbar-expand-md navbar-light bg-light sticky-top shadow p-4 mb-4 bg-white">
				<button class="navbar-toggler" type="button" data-toggle="collapse"
					data-target="#navbarTogglerDemo03"
					aria-controls="navbarTogglerDemo03" aria-expanded="false"
					aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>

		<a class="navbar-brand" href="index.html"> 
			<img
					src="https://pbs.twimg.com/profile_images/1047917455555870721/WGtP2QNH.jpg"
					alt="projectlogo" style="width:50px; height:50px;">
		</a>

		<div class="collapse navbar-collapse" id="navbarTogglerDemo03">
			<ul class="navbar-nav mr-auto mt-2 mt-lg-0">
				<li class="nav-item">
					<a class="nav-link" href="index.html">HOME</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="howto.html">HOWTO</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="faq.html">VEELGESTELDE VRAGEN</a>
				</li>
				<li class="nav-item dropdown dmenu">
					<a class="nav-link dropdown-toggle" href="pm.html" id="navbardrop"
							data-toggle="dropdown">PROBLEEMMELDINGEN</a>
					<div class="dropdown-menu sm-menu">
						<a class="dropdown-item" href="pm.html">MELD EEN PROBLEEM</a> 
						<a class="dropdown-item" href="pm.html">OVERZICHT</a>
					</div>
				</li>
			</ul>

		<form class="form-inline my-2 my-lg-0">
			<input class="form-control mr-sm-2" type="search"
							placeholder="ZOEKEN" aria-label="Search" />
			<button class="btn btn-outline-default my-2 my-sm-0 fa fa-search"
							type="submit"></button>			
		</form>

		</div>
	</nav>

	
		<div class="container-fluid padding">
		<div class="row welcome text-center">
			<div class="col-12">
				<h1 class="display-4">Probleemmeldingen</h1>
				<h2 class="display-5">Alle problemen en bijpassende oplossingen</h2>
			</div>
		</div>
	</div>
	
	<div class="container-fluid padding">
		<div class="row text-center padding">
			<div class="form-group">
				<div id="probleem-submit">
					<label for="probleem">Probleem: </label>
					<input class="form-control input-lg" placeholder="Wat is het probleem?" id="probleem" type="text" /><br>
					<button class="btn btn-outline-default my-2 my-sm-0" type="submit" id="probleem-submit" onclick="indienen">Indienen</button>
				</div>	
			</div>
		</div>
	</div>
	
	<div class="container-fluid padding">
		<div class="row welcome text-center">
			<div class="col-12">
				<h2 class="display-5">Overzicht</h2><br>
				<p>Hier moet een overzicht komen van problemen die gemeld zijn door klanten. Nadat ze zijn aangemeld door een medewerker.</p>
				<form action="probleem">
					<button id="GETprobleem" class="getprobleem" onclick="get">Geef problemen weer</button>
					<input type="text" id="updateId" placeholder="Wijzig het probleem">
					<button id="UPDATEprobleem" class="updateprobleem" onclick="update">Wijzig probleem</button>
					<input type="number" id="deleteId" placeholder="ID">
					<button id="DELETEprobleem" class="deleteprobleem" onclick="delete">Verwijder probleem</button>
				</form>	
			</div>
		</div>
	</div>
	
	
	<hr class="my-1">
	<div class="container-fluid padding">
		<div class="row text-center padding">
			<div class="col-12left2">
				<h3>Gewoon een vraag?</h3>
				<p>Vind <a href="faq.html">hier</a> alle antwoorden op je vragen.</p>
			</div>
			<div class="col-12left2">
				<h3>Liever begeleiding?</h3>
				<p>Op <a href="howto.html">deze</a> pagina vind je rondleidingen en begeleiding.</p>
			</div>
		</div>
	</div>

	<footer>
		<div class="container-fluid padding">
			<div class="row text-center">
				<div class="col-12 col-md-4 feature-1">
					<h4>Contact</h4><br>
					<p>Mail - info@wispr.tech</p>
					<p>Facebook - @WisprTech</p>
					<p>Twitter - @WisprTech</p>
				</div>
				<div class="col-12 col-md-4 feature-1">
					<h4>Inloggen</h4><br>
					<p>Wat ontzettend tof dat je al klant bent! Log nu hier in.</p>
					<a href="login.html"><button class="button">Inloggen</button></a>
				</div>
				<div class="col-12 col-md-4 feature-1">
					<h4>Registreren</h4><br>
					<p>Nog geen klant? Registreer nu!</p>
					<a href="reg.html"><button class="button">Registreren</button></a>
				</div>
			</div>
		</div>

		<div class="container-fluid padding">
			<hr class="light">
			<p class="col-12">Deze webapplicatie is mede mogelijk gemaakt door Vincent Sels, student HBO-ICT.</p>
		</div>
	</footer>
	
	
	
	<form id="opslaan">
		<input type = "number" name = "maxbedrag" id = "maxBedrag" placeholder = "Bedrag">
		<div class="dropdown">
			<select name = "categorie">
			<option value ="categorie">Kies categorie</option>
			<option value ="Kleding">Kleding</option>
			</select>
		</div>
		<input type = "date" name = "begindatum" id = "begindatum" placeholder ="Vanaf datum"/><p>
		<input type = "date" name = "einddatum" id = "einddatum"/>
	</form>	

	<div id="POSTbtn">
		<button id="POSTbtn" class = "postbtn" onclick="opslaan">Opslaan</button>
	</div>
	
	
	
	
	<table id = "limietInfo" style = "width:90%">
	<tr>
			<th>Ingesteld bedrag</th>
			<th>Categorie</th>
			<th>Begindatum</th>
			<th>Einddatum</th>
			</tr>
			
	</table>
	
	<div id="GETbtn">
		<button id="GETbtn" class = "getbtn" onclick="get">Geef limieten</button>
	</div>
	
	<h5>Transactie verwijderen</h5>
	<form id="delete">	
		<input type="number" id="delete_id" placeholder="ID">
	</form>
	
	<div id="deleteBTN">
		<button id="deleteBTN" class="deletebtn" onclick="delete">Verwijder row</button>
	</div>
	
	<h5>Transactie wijzigen</h5>
	<form id = "UpdateForm" style = "align : center">
		<input type = "number" id = "update_id" placeholder = "ID">
		<input type = "number" name = "bedrag" placeholder = "Nieuw bedrag"/>
		<div class = "dropdown">
			<select name = "categorie">
				<option value ="categorie">Kies categorie</option>
				<option value = "Boodschappen">Boodschappen</option>
		</select>
		</div>
	
	<table id = "transactieInfo" style = "width:90%">
	<tr>
			<th>Categorie</th>
			<th>Bedrag</th>
			<th>ID</th>
			<th>Datum</th>
			<th>Type</th>
			</tr>
			
	</table>
	
	<div id="updateBTN">
		<button id="update" class = "updatebtn" onclick="update">Wijzig</button>
	</div>
	</form>
	
	<script>
	document.getElementById("update").addEventListener("click", function(){
		var id = document.getElementById("update_id").value;
		
		var formData = new FormData(document.querySelector("#UpdateForm"));
		var encData = new URLSearchParams(formData.entries());
		
		fetch("restservices/transacties/update/"+id, { method: 'PUT', body: encData})
	
		.then((response)=>{
			console.log(response)
		if (response.status != 200){
			console.log("Foooooout");
		} else {
			console.log("niceeeeee");
			alert("Transactie is gewijzigd");
			} 
		})
	})
	</script>
	
	<script>
	document.getElementById("GETbtn").addEventListener("click", get)
	function get(){
		fetch("restservices/transacties/limiet")
		.then(resp => resp.json())
		.then(result => {
			var limietInfo = document.getElementById('limietInfo')
		
			console.log(result)
		
		for (let i in result){
			console.log(i)
			
			limietInfo.innerHTML += `	
			<br></br>
			<tr>
				<td> ${result[i].maxbedrag} </td>
				<td> ${result[i].categorie}</td>
				<td> ${result[i].begindatum} </td>
				<td> ${result[i].einddatum} </td>
				<td>
			</tr>
			`	
		}
		
	   })	
	} 
	</script>
	
	<script>
	document.getElementById("POSTbtn").addEventListener("click", opslaan);
		
	function opslaan() {
		var formData = new FormData(document.querySelector("#opslaan")); // Orgineel
		var encData = new URLSearchParams(formData.entries());
			
		//var formElement = document.querySelector("#indienen");
		//var formElement = document.querySelector("form");
						
		fetch("restservices/transacties/post/limiet", {method: 'POST', body: encData})
		.then((response) => {
			console.log(response)
			if (response.status == 403) {
				console.log("Error");
				alert("In gebruik!")
			}
			
			else if (response.status == 200) {
				console.log("Gelukt!");
				alert("Probleem ingediend!")
			}
			else
				{
				console.log("Status anders dan 200 en 403");
				alert("Status anders dan 200 en 403")
				
				}
		});
	}
	</script>
	
	<script>
	document.getElementById("deleteBTN").addEventListener("click", function(){
		var id = document.querySelector("#delete_id").value; 
		
		fetch("restservices/transacties/delete/"+id, { method: 'DELETE'})
		.then((response)=>{
			console.log(response)
			if (response.status != 200){
				console.log("Error");
			} else {
				console.log("toptoppertopst");
				alert("Transactie verwijderd");
			}	
		})
	})
 	</script>
</body>
</html>